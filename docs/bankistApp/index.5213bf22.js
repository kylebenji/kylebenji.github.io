"use strict";const account1={owner:"Jonas Schmedtmann",movements:[200,450.59,-400,3e3,-650,-130,70.34,1300],interestRate:1.2,pin:1111,movementsDates:["2019-11-18T21:31:17.178Z","2019-12-23T07:42:02.383Z","2020-01-28T09:15:04.904Z","2020-04-01T10:17:24.185Z","2020-05-08T14:11:59.604Z","2023-04-01T17:01:17.194Z","2023-04-05T23:36:17.929Z","2023-04-06T10:51:36.790Z"],currency:"EUR",locale:"pt-PT"},account2={owner:"Jessica Davis",movements:[5e3,3400,-150,-790.66,-3210,-1e3,8500.75,-30],interestRate:1.5,pin:2222,movementsDates:["2019-11-01T13:15:33.035Z","2019-11-30T09:48:16.867Z","2019-12-25T06:04:23.907Z","2020-01-25T14:18:46.235Z","2020-02-05T16:33:06.386Z","2020-04-10T14:43:26.374Z","2020-06-25T18:49:59.371Z","2020-07-26T12:01:20.894Z"],currency:"USD",locale:"en-US"},account3={owner:"Steven Thomas Williams",movements:[200,-200.97,340,-300,-20.01,50,400,-460],interestRate:.7,pin:3333,movementsDates:["2019-11-18T21:31:17.178Z","2019-12-23T07:42:02.383Z","2020-01-28T09:15:04.904Z","2020-04-01T10:17:24.185Z","2020-05-08T14:11:59.604Z","2020-05-27T17:01:17.194Z","2020-07-11T23:36:17.929Z","2020-07-12T10:51:36.790Z"],currency:"GPB",locale:"en-GB"},account4={owner:"Sarah Smith",movements:[430.43,1e3,700,50.76,90],interestRate:1,pin:4444,movementsDates:["2019-11-01T13:15:33.035Z","2019-11-30T09:48:16.867Z","2019-12-25T06:04:23.907Z","2020-01-25T14:18:46.235Z","2020-02-05T16:33:06.386Z"],currency:"EUR",locale:"es-ES"},accounts=[account1,account2,account3,account4],labelWelcome=document.querySelector(".welcome"),labelDate=document.querySelector(".date"),labelBalance=document.querySelector(".balance__value"),labelSumIn=document.querySelector(".summary__value--in"),labelSumOut=document.querySelector(".summary__value--out"),labelSumInterest=document.querySelector(".summary__value--interest"),labelTimer=document.querySelector(".timer"),containerApp=document.querySelector(".app"),containerMovements=document.querySelector(".movements"),btnLogin=document.querySelector(".login__btn"),btnTransfer=document.querySelector(".form__btn--transfer"),btnLoan=document.querySelector(".form__btn--loan"),btnClose=document.querySelector(".form__btn--close"),btnSort=document.querySelector(".btn--sort"),inputLoginUsername=document.querySelector(".login__input--user"),inputLoginPin=document.querySelector(".login__input--pin"),inputTransferTo=document.querySelector(".form__input--to"),inputTransferAmount=document.querySelector(".form__input--amount"),inputLoanAmount=document.querySelector(".form__input--loan-amount"),inputCloseUsername=document.querySelector(".form__input--user"),inputClosePin=document.querySelector(".form__input--pin"),displayMovements=function(e,t){let n=e.movements;containerMovements.innerHTML="";(t?n.slice().sort(((e,t)=>e-t)):n).forEach((function(t,n){const o=t>0?"deposit":"withdrawal",r=new Date(e.movementsDates[n]),u=`\n    <div class="movements__row">\n      <div class="movements__type movements__type--${o}">${n+1} ${o}</div>\n      <div class="movements__date">${formatDate(e,r,!1,!0)}</div>\n      <div class="movements__value">${formatCurrency(e,t.toFixed(2))}</div>\n    </div>\n    `;containerMovements.insertAdjacentHTML("afterbegin",u)}))},calcPrintBalance=function(e){const t=e.movements.reduce((function(e,t){return e+t}),0);e.balance=t,labelBalance.textContent=`${formatCurrency(e,t.toFixed(2))}`,labelDate.textContent=formatDate(e,new Date)},updateSums=function(e){let t=e.movements,n=t.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0),o=t.filter((function(e){return e<0})).reduce((function(e,t){return e+t}),0);labelSumIn.textContent=`${formatCurrency(e,n.toFixed(2))}`,labelSumOut.textContent=`${formatCurrency(e,Math.abs(o).toFixed(2))}`;const r=t.filter((function(e){return e>0})).map((function(t){return t*e.interestRate/100})).filter((function(e){return e>1})).reduce((function(e,t){return e+t}),0);labelSumInterest.textContent=`${formatCurrency(e,r.toFixed(2))}`},createUsername=function(e){return e.toLowerCase().split(" ").map((function(e){return e[0]})).join("")},createUsernames=function(e){e.forEach((function(e){e.username=e.owner.toLowerCase().split(" ").map((function(e){return e[0]})).join("")}))};createUsernames(accounts);const displayBody=function(e){e.movements;displayMovements(e),calcPrintBalance(e),updateSums(e)};function hideUI(){containerApp.style.opacity=0}function showUI(){containerApp.style.opacity=100}const daysToSimplify=7;let currAccount;const optionsWTime={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},optionsNumeric={year:"numeric",month:"2-digit",day:"2-digit"};function calcDaysBetween(e,t){return Math.round(Math.abs(t-e)/864e5)}function formatDate(e,t,n=!0,o=!1){if(o){let e=calcDaysBetween(t,new Date);if(e<daysToSimplify){if(0===e)return"Today";if(1===e)return"Yesterday";if(e<daysToSimplify)return`${e} days ago`}}let r;return r=n?new Intl.DateTimeFormat(e.locale,optionsWTime).format():new Intl.DateTimeFormat(e.locale,optionsNumeric).format(),r}function nowString(){return(new Date).toISOString()}const currencyOptions={style:"currency"};function formatCurrency(e,t){return currencyOptions.currency=e.currency,new Intl.NumberFormat(e.locale,currencyOptions).format(t)}let logoutTimer;const startLogoutTimer=function(){let e=300;clearInterval(logoutTimer);const t=function(){labelTimer.textContent=`${Math.floor(e/60)}:${(""+e%60).padStart(2,"0")}`,0===e&&(clearInterval(logoutTimer),hideUI(),labelWelcome.textContent="Login to get started",currAccount=null),e--};t(),logoutTimer=setInterval(t,1e3)};function isValidTransfer(e,t,n){return n!==t&&(!(t.balance<e)&&(!(e<0)&&!!n))}btnLogin.addEventListener("click",(function(e){e.preventDefault(),currAccount=accounts.find((function(e){return e.username===inputLoginUsername.value})),currAccount?.pin===+inputLoginPin.value&&(inputLoginPin.value=inputLoginUsername.value="",inputLoginPin.blur(),labelWelcome.textContent=`Welcome back, ${currAccount.owner.split(" ")[0]}`,showUI(),displayBody(currAccount),startLogoutTimer())})),btnTransfer.addEventListener("click",(function(e){e.preventDefault();const t=+inputTransferAmount.value;let n=inputTransferTo.value;n=accounts.find((function(e){return e.username===n})),isValidTransfer(t,currAccount,n)&&(currAccount.movements.push(-1*t),n.movements.push(t),currAccount.movementsDates.push(nowString()),n.movementsDates.push(nowString()),displayBody(currAccount)),inputTransferAmount.value=inputTransferTo.value="",startLogoutTimer()})),btnLoan.addEventListener("click",(function(e){e.preventDefault();const t=Math.floor(+inputLoanAmount.value);t>0&&currAccount.movements.some((function(e){return e>=t/10}))&&setTimeout((function(){currAccount.movements.push(t),currAccount.movementsDates.push(nowString()),displayBody(currAccount)}),2500),inputLoanAmount.value="",startLogoutTimer()})),btnClose.addEventListener("click",(function(e){if(e.preventDefault(),currAccount.username===inputCloseUsername.value&&currAccount.pin===+inputClosePin.value){const e=accounts.findIndex((function(e){return e.username===currAccount.username}));accounts.splice(e,1),hideUI()}inputClosePin.value=inputCloseUsername.value=""}));let sorting=!1;btnSort.addEventListener("click",(function(e){e.preventDefault(),displayMovements(currAccount,!sorting),sorting=!sorting,startLogoutTimer()}));
//# sourceMappingURL=index.5213bf22.js.map
